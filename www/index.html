<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>unsu</title>
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <script src="https://cdn.ethers.io/lib/ethers-5.2.umd.min.js" type="application/javascript"></script>
    <style>
        * {
            box-sizing: border-box;
            font-family: sans-serif;
            font-size: 16px;
        }

        html {
            background-color: #C5C5FF;
            color: #3F1291;
        }

        body {
            margin: 0;
            padding: 100px 25px 25px 25px;
        }

        .logo {
            position: fixed;
            top: 25px;
            left: 25px;
            height: 40px;
            width: auto;
        }

        #inputString {
            width: 100%;
            height: 70px;
            resize: none;
            color: #3F1291;
            background-color: #ffffff;
            border: none;
            border-radius: 12px;
            outline: none;
            font-family: unset;
            padding: 20px;
        }
        
        #inputString::placeholder {
            color: #3F1291;
            opacity: .5;
        }

        button {
            width: 100%;
            height: 50px;
            border: none;
            border-radius: 12px;
            color: #fff;
            background-color: #3F1291;
            font-size: 20px;
            cursor: pointer;
            margin-top: 5px;
            transition: .2s ease;
        }

        button:hover {
            opacity: .8;
        }

        .details-address,
        .details-key {
            text-wrap: wrap;
            width: 100%;
            line-break: anywhere;
            text-align: center;
        }
    </style>
</head>
<body>
    <svg class="logo" fill="none" height="316" viewBox="0 0 978 316" width="978" xmlns="http://www.w3.org/2000/svg"><rect fill="#3f1291" height="316" rx="65" width="978"/><g fill="#c5c5ff"><path d="m720.922 65h33.5c2.167.3333 3.25 1.3333 3.25 3v143.25h70v-33.5c.333-2 1.333-3 3-3h33.5v-106.75c.333-2 1.417-3 3.25-3h33.5c2 .3333 3 1.3333 3 3v180c0 2-1 3-3 3h-33.5c-2.167 0-3.25-1-3.25-3v-33.5h-33.5v33.5c0 2-1 3-3 3h-70c-2.167 0-3.25-1-3.25-3v-33.5h-33.5c-2 0-3-1.083-3-3.25v-143.25c.333-2 1.333-3 3-3z"/><path d="m544.113 64h107.5c2 .3333 3 1.3333 3 3v34c0 2-1 3-3 3h-107.5v33.75h107.5c2 .333 3 1.333 3 3v34h34c2 .333 3 1.333 3 3v33.75c0 2-1 3-3 3h-34v34c0 2-1 3-3 3h-144.5c-2 0-3-1-3-3v-34c.334-2 1.334-3 3-3h144.5v-33.75h-107.5c-2 0-3-1-3-3v-34h-34c-2 0-3-1-3-3v-33.75c.334-2 1.334-3 3-3h34v-34c.167-2 1.167-3 3-3z"/><path d="m292.555 64.75h33.5c2.166.3333 3.25 1.3333 3.25 3v33.5h33.5v-33.5c.333-2 1.333-3 3-3h70c2.166.3333 3.25 1.3333 3.25 3v33.5h33.5c2 .333 3 1.417 3 3.25v143.25c0 2-1 3-3 3h-33.5c-2.167 0-3.25-1-3.25-3v-143.25h-70v33.5c0 2-1 3-3 3h-33.5v106.75c0 2-1.084 3-3.25 3h-33.5c-2 0-3-1-3-3v-180c.333-2 1.333-3 3-3z"/><path d="m78 65h33.5c2.167.3333 3.25 1.3333 3.25 3v143.25h70v-33.5c.333-2 1.333-3 3-3h33.5v-106.75c.333-2 1.417-3 3.25-3h33.5c2 .3333 3 1.3333 3 3v180c0 2-1 3-3 3h-33.5c-2.167 0-3.25-1-3.25-3v-33.5h-33.5v33.5c0 2-1 3-3 3h-70c-2.167 0-3.25-1-3.25-3v-33.5h-33.5c-2 0-3-1.083-3-3.25v-143.25c.3333-2 1.3333-3 3-3z"/></g></svg>
    <form id="walletForm">
        <textarea type="text" id="inputString" placeholder="Enter a unique string"></textarea>
        <button type="submit">Get started</button>
    </form>
    <div id="walletDetails"></div>
    <div id="walletBalance"></div>

    <script>
        const rpcUrl = 'http://127.0.0.1:8545';
        const provider = new ethers.providers.JsonRpcProvider(rpcUrl);

        // Function to create an Ethereum wallet from a string input.
        function deriveWalletFromString(inputString) {
            // Compute the keccak256 cryptographic hash of a UTF-8 string, returned as a hex string.
            const seed = ethers.utils.id(inputString);
            
            // Use the hashed string to create a wallet.
            const wallet = new ethers.Wallet(seed);
            
            return wallet;
        }

        // Function to fetch the Ether balance of an account.
        async function getEtherBalance(address) {
            const balanceBigInt = await provider.getBalance(address);
            const balanceInEther = ethers.utils.formatEther(balanceBigInt);
            return balanceInEther
        }

        document.getElementById('walletForm').addEventListener('submit', async function(e) {
            e.preventDefault(); // Prevent form submission
            const inputString = document.getElementById('inputString').value;
            if (!inputString) {
                alert('Please enter a string.');
                return;
            }

            // Use the hashed string to create a wallet
            const wallet = deriveWalletFromString(inputString);

            // Display wallet details
            document.getElementById('walletDetails').innerHTML = `<p class="subheader">Address:</p> <p class="details-address">${wallet.address}\n</p> <p class="subheader">Private Key:</p> <p class="details-key"">${wallet.privateKey}</p>`;
        
            // Fetch and display balance details
            const balance = await getEtherBalance(wallet.address);
            document.getElementById('walletBalance').innerHTML = `<p class="subheader">Balance:</p> <p class="details-balance">${balance} ETH</p>`
        });
    </script>
</body>
</html>