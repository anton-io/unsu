<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ethereum Wallet Generator</title>
    <script src="https://cdn.ethers.io/lib/ethers-5.2.umd.min.js" type="application/javascript"></script>
</head>
<body>
    <h1>Ethereum Wallet Generator</h1>
    <form id="walletForm">
        <input type="text" id="inputString" placeholder="Enter a unique string">
        <button type="submit">Generate Wallet</button>
    </form>
    <div id="walletDetails"></div>
    <div id="walletBalance"></div>

    <script>
        const rpcUrl = 'http://127.0.0.1:8545';
        const provider = new ethers.providers.JsonRpcProvider(rpcUrl);

        // Function to create an Ethereum wallet from a string input.
        function deriveWalletFromString(inputString) {
            // Compute the keccak256 cryptographic hash of a UTF-8 string, returned as a hex string.
            const seed = ethers.utils.id(inputString);
            
            // Use the hashed string to create a wallet.
            const wallet = new ethers.Wallet(seed);
            
            return wallet;
        }

        // Function to fetch the Ether balance of an account.
        async function getEtherBalance(address) {
            const balanceBigInt = await provider.getBalance(address);
            const balanceInEther = ethers.utils.formatEther(balanceBigInt);
            return balanceInEther
        }

        document.getElementById('walletForm').addEventListener('submit', async function(e) {
            e.preventDefault(); // Prevent form submission
            const inputString = document.getElementById('inputString').value;
            if (!inputString) {
                alert('Please enter a string.');
                return;
            }

            // Use the hashed string to create a wallet
            const wallet = deriveWalletFromString(inputString);

            // Display wallet details
            document.getElementById('walletDetails').innerText = `Address: ${wallet.address}\nPrivate Key: ${wallet.privateKey}`;
        
            // Fetch and display balance details
            const balance = await getEtherBalance(wallet.address);
            document.getElementById('walletBalance').innerText = `Balance: ${balance} ETH`
        });
    </script>
</body>
</html>
